<launch>
    <node pkg="plan_env" type="dsp_map_node" name="particle_map" output="screen">
        <!-- particle map -->
        <param name="particle_map/pose_type" value="2" type="int"/>
        <param name="particle_map/frame_id" value="world" type="string"/>
        <param name="particle_map/odom_lidar_timeout" value="0.35" type="double"/>
        <param name="particle_map/local_update_range_x" value="5" type="double"/>
        <param name="particle_map/local_update_range_y" value="5" type="double"/>
        <param name="particle_map/local_update_range_z" value="1.5" type="double"/>
        <param name="particle_map/inf_grid" value="1" type="int"/>
        <param name="particle_map/enable_virtual_wall" value="false" type="bool"/>
        <param name="particle_map/virtual_ceil" type="double" value="10"/>
        <param name="particle_map/virtual_ground" type="double" value="0"/>
        <param name="particle_map/half_fov_horizontal" type="double" value="180"/>
        <param name="particle_map/fov_vertical_lowbound" type="int" value="0"/>
        <param name="particle_map/fov_vertical_upbound" type="int" value="50"/>
        <remap from="~lidar" to="/cloud_registered"/>
        <remap from="~odom" to="/Odometry"/>
        <param name="particle_map/occupancy_thresh" value="0.8" type="double"/>
        <param name="particle_map/risk_thresh" value = "0.2" type="double"/>
        <!-- <param name="particle_map/acc_future_risk_thresh" value = "0.07" type="double"/> -->
        <param name="particle_map/enable_future_prediction" value="false" type="bool"/>
        <param name="particle_map/prediction_z_height" value="0.2" type="double"/>
        <param name="particle_map/prediction_y_offset" value="25" type="double"/>
        <param name="particle_map/dynamic_cluster_max_center_height" value="20.0" type="double"/>
        <param name="particle_map/dynamic_cluster_max_point_num" value="100" type="int"/>
        <param name="particle_map/position_prediction_stddev" type="double" value="0.05"/>
        <param name="particle_map/velocity_prediction_stddev" type="double" value="0.05"/>
        <param name="particle_map/new_born_particle_weight" type="double" value="0.001"/>
        <param name="particle_map/new_born_particle_number_each_point" type="int" value="20"/>
        <param name="particle_map/voxel_filter_resolution" type="double" value="0.2"/>
        <param name="particle_map/sigma_ob" type="double" value="1.0"/>
        <param name="particle_map/kappa" type="double" value="0.01"/>
        <param name="particle_map/P_detection" type="double" value="0.95"/>


    </node>

    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find plan_env)/config/default.rviz" />

    <node pkg="rosbag" type="play" name="player"  args="--clock /home/huyu/workspaces/topo-risk-aware-planner/shfiles/real_world_2024-01-03-21-19-24.bag"/>

    <!-- <node pkg="rviz" type="rviz" name="dsp_map" args="-d $(find plan_env)/config/default.rviz"/> -->
</launch>